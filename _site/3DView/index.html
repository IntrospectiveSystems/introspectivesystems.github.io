<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.4.0 -->
<title>3DView | xGraph</title>
<meta name="generator" content="Jekyll v3.7.3" />
<meta property="og:title" content="3DView" />
<meta name="author" content="Introspective Systems" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="xGraph makes development of complex systems easy with its graph architecture of self-similar parts." />
<meta property="og:description" content="xGraph makes development of complex systems easy with its graph architecture of self-similar parts." />
<link rel="canonical" href="http://localhost:4000/3DView/" />
<meta property="og:url" content="http://localhost:4000/3DView/" />
<meta property="og:site_name" content="xGraph" />
<script type="application/ld+json">
{"description":"xGraph makes development of complex systems easy with its graph architecture of self-similar parts.","author":{"@type":"Person","name":"Introspective Systems"},"@type":"WebPage","url":"http://localhost:4000/3DView/","headline":"3DView","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link href="https://fonts.googleapis.com/css?family=Open+Sans|Raleway" rel="stylesheet">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css"
        integrity="sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB"
        crossorigin="anonymous">
  <link rel="stylesheet" href="/assets/main.css">
  <link rel="stylesheet" href="/assets/style.css"><link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="xGraph" /></head>
<body class="bg-is-gray">
    <div class="page"><header class="" role="banner"><nav class="navbar navbar-expand-md bg-light-green main-nav fixed-top">
    <div class="container">
      <a class="navbar-brand" rel="author" href="/">xGraph</a>
      <span>by&nbsp;</span> <a href="https://www.introspectivesystems.com/">Introspective Systems</a><button class="navbar-toggler  ml-auto" type="button" data-toggle="collapse"
             data-target="#navbar-content"
            aria-controls="navbar-content" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbar-content">
        <ul class="navbar-nav ml-auto"><li class="nav-item"><a class="nav-link" href="/basics/">Basics</a>
              </li><li class="nav-item"><a class="nav-link" href="/getting-started/">Getting Started</a>
              </li><li class="nav-item active"><a class="nav-link" href="/module-broker/">Module Broker</a>
              </li><li class="nav-item"><a class="nav-link" href="/platform/">Platform</a>
              </li><li class="nav-item"><a class="nav-link" href="/contributing/">Contributing</a>
              </li></ul>
      </div>
    </div></nav>

</header>
<main class="main" aria-label="Content">
        <div class="container">
          <div class="row">
            <div class="col-md-3 vertical-menu bg-light">
              <ul class="nav flex-column"><li class="nav-item font-weight-bold"><a class="nav-link" href="/module-broker/">Module Broker</a>
                        </li><li class="nav-item"><a class="nav-link" href="/2DView/">2DView</a>
                          </li><li class="nav-item active"><a class="nav-link" href="/3DView/">3DView</a>
                          </li><li class="nav-item"><a class="nav-link" href="/AceEditorView/">AceEditorView</a>
                          </li><li class="nav-item"><a class="nav-link" href="/BankAccount/">BankAccount</a>
                          </li><li class="nav-item"><a class="nav-link" href="/BankPatron/">BankPatron</a>
                          </li><li class="nav-item"><a class="nav-link" href="/FlatFile/">FlatFile</a>
                          </li><li class="nav-item"><a class="nav-link" href="/HelloWorld/">HelloWorld</a>
                          </li><li class="nav-item"><a class="nav-link" href="/Menubar/">Menubar</a>
                          </li><li class="nav-item"><a class="nav-link" href="/Mouse/">Mouse</a>
                          </li><li class="nav-item"><a class="nav-link" href="/NeDB/">NeDB</a>
                          </li><li class="nav-item"><a class="nav-link" href="/PanelView/">PanelView</a>
                          </li><li class="nav-item"><a class="nav-link" href="/Perceptron/">Perceptron</a>
                          </li><li class="nav-item"><a class="nav-link" href="/Ping/">Ping</a>
                          </li><li class="nav-item"><a class="nav-link" href="/Plexus/">Plexus</a>
                          </li><li class="nav-item"><a class="nav-link" href="/Pong/">Pong</a>
                          </li><li class="nav-item"><a class="nav-link" href="/Popup/">Popup</a>
                          </li><li class="nav-item"><a class="nav-link" href="/Proxy/">Proxy</a>
                          </li><li class="nav-item"><a class="nav-link" href="/RootView/">RootView</a>
                          </li><li class="nav-item"><a class="nav-link" href="/SQLite/">SQLite</a>
                          </li><li class="nav-item"><a class="nav-link" href="/ServerProxy/">ServerProxy</a>
                          </li><li class="nav-item"><a class="nav-link" href="/TableView/">TableView</a>
                          </li><li class="nav-item"><a class="nav-link" href="/Validate/">Validate</a>
                          </li><li class="nav-item"><a class="nav-link" href="/WebProxy/">WebProxy</a>
                          </li><li class="nav-item"><a class="nav-link" href="/WebViewer/">WebViewer</a>
                          </li></ul>
            </div>
            <div class="col-md-9 bg-white content">
              <h1 id="3dview">3DView</h1>

<p>v1.0.0</p>

<p>Introspective Systems, LLC.</p>

<hr />

<p>The 3DView Module adds and renders a <a href="https://threejs.org/docs/index.html#api/scenes/Scene">three.js scene</a> 
on the div provided by the Viewify class (referenced in <code class="highlighter-rouge">this.Vlt.div</code>). Currently only three.js primitives 
and generated <a href="https://threejs.org/docs/index.html#api/core/Object3D">three.js Object3D</a> models 
can be added to the scene and rendered.</p>

<hr />

<h2 id="module-definition-parameters">Module Definition Parameters</h2>

<p>Parameters passed from the module definition to the <code class="highlighter-rouge">Par</code> attribute of 3DView’s <code class="highlighter-rouge">this</code> 
attribute, <code class="highlighter-rouge">this.Par</code>, when the module is generated.</p>

<h3 id="parameters">Parameters</h3>
<ul>
  <li><code class="highlighter-rouge">"Server" : "xGraphPid"</code>:  <em>xGraphPid</em> being the pid of the module acting as a model server, a 
                              module that 3DView expects to receive commands from. Often, 
                              this will be a WebViewer module, or a Proxy module pointing to 
                              the WebViewer module.</li>
  <li><code class="highlighter-rouge">"Controller": "xGraphPid"</code>:  <em>xGraphPid</em> being the pid of the module acting as a model 
                                  controller, where 3DView will get models, and send and 
                                  receive commands.</li>
  <li><code class="highlighter-rouge">"EvokeView": "xGraphModuleDefinition"</code>:  For the initial 3DView example, <em>xGraphModuleDefinition</em> is 
                                          a module definition of the view that will be generated 
                                          and rendered in a Popup view when the EvokeExample is 
                                          received.</li>
</ul>

<p>Here is an example of a module definition for 3DView.</p>
<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"3DView"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"Module"</span><span class="p">:</span><span class="w"> </span><span class="s2">"xGraph.3DView"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Par"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"Controller"</span><span class="p">:</span><span class="w"> </span><span class="s2">"$ControllerProxy"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"Server"</span><span class="p">:</span><span class="w"> </span><span class="s2">"$ServerProxy"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<hr />

<h2 id="output-commands">Output Commands</h2>

<p>The Output Commands are all the command that 3DView can send to other modules.</p>

<p>If a <code class="highlighter-rouge">"Controller"</code> included in the parameters, the 3DView will send two commands to the module 
referenced in <code class="highlighter-rouge">this.Par.Controller</code>:</p>

<h3 id="cmdregister-pidxgraphpid"><code class="highlighter-rouge">{"Cmd":"Register", "Pid":"xGraphPid"}</code></h3>
<p>The <code class="highlighter-rouge">"Register"</code> command is sent with one attribute, <code class="highlighter-rouge">"Pid"</code> referencing this module’s Pid, 
during the Start phase to enable the controller module to save the 3DView Pid, so 
that the controller can send commands to this 3DView instance.</p>

<h3 id="cmdsaveimage-imagestring-namestring"><code class="highlighter-rouge">{"Cmd":"SaveImage", "Image":"String", "Name":"String"}</code></h3>
<p>When 3DView receives an <code class="highlighter-rouge">"ImageCapture"</code> command, the <code class="highlighter-rouge">"SaveImage"</code> command is sent with two 
attributes: <code class="highlighter-rouge">"Image"</code> referencing a data URL with the image encoded in a base64 string and 
Name referencing a string containing the index (starting with 1) of the image saved so 
far from this 3DView instance.</p>

<p>If a <code class="highlighter-rouge">"Server"</code> is included in the parameters, the 3DView will send one command to the module 
referenced in <code class="highlighter-rouge">this.Par.Server</code>:</p>

<h3 id="cmdsubscribe-pidxgraphpid-linkstring"><code class="highlighter-rouge">{"Cmd":"Subscribe", "Pid":"xGraphPid", "Link":"String"}</code></h3>
<p>The <code class="highlighter-rouge">"Subscribe"</code> command is sent with two attributes: <code class="highlighter-rouge">"Pid"</code> referencing this module’s Pid, and 
<code class="highlighter-rouge">"Link"</code> is the name of this module, the string 3DView. <code class="highlighter-rouge">"Subscribe"</code> is sent in the Start phase 
so that the server is able to send commands to this 3DView instance.</p>

<hr />

<h2 id="input-commands">Input Commands</h2>
<p>The Input Commands are all the commands that 3DView can receive.</p>

<h3 id="setobjectscom-fun">SetObjects(com, fun)</h3>

<p>When 3DView receives the SetObject command, 3DView takes the models found in the <code class="highlighter-rouge">"Objects"</code> key, adds 
them to the scene, and renders the scene. 3DView is capable of rendering three.js primitive models, 
as well as generated models.</p>

<h4 id="parameters-1">Parameters</h4>
<ul>
  <li><strong>com</strong> (<em>required</em>): The command object.</li>
  <li><strong>com.Objects</strong> (<em>required</em>): An array of model objects that will be added to the scene and rendered.</li>
  <li><strong>fun</strong> (<em>required</em>): The callback function.</li>
</ul>

<p>Here is an example of a <code class="highlighter-rouge">"SetObject"</code> command with a single three.js object.</p>
<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"Cmd"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SetObjects"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"Objects"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="err">id</span><span class="p">:</span><span class="w"> </span><span class="err">idx</span><span class="p">,</span><span class="w">
      </span><span class="err">geometry</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="err">id</span><span class="p">:</span><span class="w"> </span><span class="s2">"geom"</span><span class="p">,</span><span class="w">
        </span><span class="err">name</span><span class="p">:</span><span class="w"> </span><span class="s2">"SphereGeometry"</span><span class="p">,</span><span class="w">
        </span><span class="err">arguments</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">64</span><span class="p">,</span><span class="w"> </span><span class="mi">64</span><span class="p">]</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="err">mesh</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="err">id</span><span class="p">:</span><span class="w"> </span><span class="s2">"mesh"</span><span class="p">,</span><span class="w">
        </span><span class="err">name</span><span class="p">:</span><span class="w"> </span><span class="s2">"MeshPhongMaterial"</span><span class="p">,</span><span class="w">
        </span><span class="err">arguments</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="err">color</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="err">xFFFFFF</span><span class="w"> </span><span class="err">*</span><span class="w"> </span><span class="err">Math.random()</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="err">position</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="err">x</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="w"> </span><span class="err">*</span><span class="w"> </span><span class="err">Math.random()</span><span class="p">,</span><span class="w">
        </span><span class="err">y</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="w"> </span><span class="err">*</span><span class="w"> </span><span class="err">Math.random()</span><span class="p">,</span><span class="w">
        </span><span class="err">z</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="w"> </span><span class="err">*</span><span class="w"> </span><span class="err">Math.random()</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="err">scale</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="err">x</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="err">*</span><span class="w"> </span><span class="err">Math.random()</span><span class="p">,</span><span class="w">
        </span><span class="err">y</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="err">*</span><span class="w"> </span><span class="err">Math.random()</span><span class="p">,</span><span class="w">
        </span><span class="err">z</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="err">*</span><span class="w"> </span><span class="err">Math.random()</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="err">responseHandler</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="err">Cmd</span><span class="p">:</span><span class="w"> </span><span class="s2">"EvokeExample"</span><span class="p">,</span><span class="w">
        </span><span class="err">Handler</span><span class="p">:</span><span class="w"> </span><span class="err">this.Par.Pid</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<h3 id="imagecapturecom-fun">ImageCapture(com, fun)</h3>

<p>When 3DView receives the ImageCapture command, it get’s an image of the canvas in the form of a 
data url, which encodes the picture in a base64 string. Then 3DView sends out a <code class="highlighter-rouge">"SaveImage"</code> 
command with two attributes: <code class="highlighter-rouge">"Image"</code> referencing the data url, and <code class="highlighter-rouge">"Name"</code> referencing the 
index of the data url as captured by this instance of 3DView, and returns the two attributes 
in the callback function.</p>

<h4 id="parameters-2">Parameters</h4>
<ul>
  <li><strong>com</strong> (<em>required</em>): The command object.</li>
  <li><strong>fun</strong> (<em>required</em>): The callback function.</li>
</ul>

<h4 id="returns">Returns</h4>
<ul>
  <li><strong>com.Image</strong>: A data url as a base64 string.</li>
  <li><strong>com.Name</strong>: The index number of the data url captured by this instance of 3DView.</li>
</ul>

<p>So if you send 3DView this command:</p>
<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
 </span><span class="s2">"Cmd"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ImageCapture"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>It will send out this command to the controller:</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="kd">let</span> <span class="nx">cmd</span> <span class="o">=</span> <span class="p">{};</span>
 <span class="nx">cmd</span><span class="p">.</span><span class="nx">Cmd</span> <span class="o">=</span> <span class="s2">"SaveImage"</span><span class="p">;</span>
 <span class="nx">cmd</span><span class="p">.</span><span class="nx">Image</span> <span class="o">=</span> <span class="nx">com</span><span class="p">.</span><span class="nx">Image</span><span class="p">;</span>
 <span class="nx">cmd</span><span class="p">.</span><span class="nx">Name</span> <span class="o">=</span> <span class="nx">com</span><span class="p">.</span><span class="nx">Name</span><span class="p">;</span>
 <span class="k">this</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">cmd</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">Par</span><span class="p">.</span><span class="nx">Controller</span><span class="p">);</span>
</code></pre></div></div>

<h3 id="cleanupcom-fun">Cleanup(com, fun)</h3>

<p>When 3DView receives the cleanup command, it removes the render loop, and 
the scene will no longer look for updates.</p>

<h4 id="parameters-3">Parameters</h4>
<ul>
  <li><strong>com</strong> (<em>required</em>): The command object.</li>
  <li><strong>fun</strong> (<em>required</em>): The callback function.</li>
</ul>

<p>You can send 3DView the cleanup command:</p>
<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
 </span><span class="s2">"Cmd"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Cleanup"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<h3 id="evokeexamplecom-fun">EvokeExample(com, fun)</h3>

<p>EvokeExample is an example of an Evoke handler. When 3DView receives EvokeExample, 
it generates a popup module containing another 3DView module, or the module 
referenced in <code class="highlighter-rouge">this.Par.EvokeView</code>.</p>

<h4 id="parameters-4">Parameters</h4>
<ul>
  <li><strong>com</strong> (<em>required</em>): The command object.</li>
  <li><strong>com.id</strong> (<em>required</em>): The id of the object with this response handler.</li>
  <li><strong>com.Mouse</strong> (<em>require</em>): An object containing and <code class="highlighter-rouge">"x"</code> and <code class="highlighter-rouge">"y"</code> key referencing 
                              the x and y position of the mouse.</li>
  <li><strong>fun</strong>: The callback function.</li>
</ul>

<p>Send an example evoke message</p>

<p>You can send 3DView the EvokeExample command:</p>
<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
 </span><span class="s2">"Cmd"</span><span class="p">:</span><span class="w"> </span><span class="s2">"EvokeExample"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"String"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"mouse"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
   </span><span class="s2">"x"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Integer"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"y"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Integer"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>


            </div>
          </div>
        </main><footer class="site-footer h-card bg-dark text-light-green">
  <div class="container">


    <h2 class="footer-heading"><a class="u-url text-green" href="/">xGraph</a></h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Introspective Systems</li><li><a class="u-email" href="mailto:info@introspectivesystems.com">info@introspectivesystems.com</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/IntrospectiveSystems"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">IntrospectiveSystems</span></a></li><li><a href="https://www.twitter.com/AtIntrospective"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#twitter"></use></svg> <span class="username">AtIntrospective</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>xGraph makes development of complex systems easy with its graph architecture of self-similar parts.</p>
      </div>
    </div>
  </div>

</footer>
</div>
    </div>
    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js" integrity="sha384-smHYKdLADwkXOn1EmN1qk/HfnUcbVRZyYmZ4qpPea6sjB/pTJ0euyQp0Mk8ck+5T" crossorigin="anonymous"></script>
  </body>

</html>

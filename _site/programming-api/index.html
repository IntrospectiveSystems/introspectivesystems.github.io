<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.4.0 -->
<title>Programming API | xGraph</title>
<meta name="generator" content="Jekyll v3.7.3" />
<meta property="og:title" content="Programming API" />
<meta name="author" content="Introspective Systems" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="xGraph makes development of complex systems easy with its graph architecture of self-similar parts." />
<meta property="og:description" content="xGraph makes development of complex systems easy with its graph architecture of self-similar parts." />
<link rel="canonical" href="http://localhost:4000/programming-api/" />
<meta property="og:url" content="http://localhost:4000/programming-api/" />
<meta property="og:site_name" content="xGraph" />
<script type="application/ld+json">
{"description":"xGraph makes development of complex systems easy with its graph architecture of self-similar parts.","author":{"@type":"Person","name":"Introspective Systems"},"@type":"WebPage","url":"http://localhost:4000/programming-api/","headline":"Programming API","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link href="https://fonts.googleapis.com/css?family=Open+Sans|Raleway" rel="stylesheet">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css"
        integrity="sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB"
        crossorigin="anonymous">
  <link rel="stylesheet" href="/assets/main.css">
  <link rel="stylesheet" href="/assets/style.css"><link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="xGraph" /></head>
<body class="bg-is-gray">
    <div class="page"><header class="" role="banner"><nav class="navbar navbar-expand-md bg-light-green main-nav fixed-top">
    <div class="container">
      <a class="navbar-brand" rel="author" href="/">xGraph</a>
      <span>by&nbsp;</span> <a href="https://www.introspectivesystems.com/">Introspective Systems</a><button class="navbar-toggler  ml-auto" type="button" data-toggle="collapse"
             data-target="#navbar-content"
            aria-controls="navbar-content" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbar-content">
        <ul class="navbar-nav ml-auto"><li class="nav-item"><a class="nav-link" href="/basics/">Basics</a>
              </li><li class="nav-item"><a class="nav-link" href="/getting-started/">Getting Started</a>
              </li><li class="nav-item"><a class="nav-link" href="/module-broker/">Module Broker</a>
              </li><li class="nav-item active"><a class="nav-link" href="/platform/">Platform</a>
              </li><li class="nav-item"><a class="nav-link" href="/contributing/">Contributing</a>
              </li></ul>
      </div>
    </div></nav>

</header>
<main class="main" aria-label="Content">
        <div class="container">
          <div class="row">
            <div class="col-md-3 vertical-menu bg-light">
              <ul class="nav flex-column"><li class="nav-item font-weight-bold"><a class="nav-link" href="/platform/">Platform</a>
                        </li><li class="nav-item active"><a class="nav-link" href="/programming-api/">Programming API</a>
                          </li></ul>
            </div>
            <div class="col-md-9 bg-white content">
              <h1 id="programming-api">Programming API</h1>

<ol>
  <li><a href="#functions">Functions</a>
    <ul>
      <li><a href="#thisgenmodulemoduleobject-callback">this.genModule(moduleObject, callback)</a></li>
      <li><a href="#thisgenmodulesmoduleobject-callback">this.genModules(moduleObject, callback)</a></li>
      <li><a href="#thisgenentityentitydefinition-callback">this.genEntity(entityDefinition, callback)</a></li>
      <li><a href="#thisdeleteentityapex-pid-callback">this.deleteEntity(apex, pid, callback)</a></li>
      <li><a href="#thisgenpid">this.genPid()</a></li>
      <li><a href="#thissendcommand-pid-callback">this.send(command, pid, callback)</a></li>
      <li><a href="#thissavecallback">this.save(callback)</a></li>
      <li><a href="#thisgetfilemodule-filename-callback">this.getFile(module, filename, callback)</a></li>
      <li><a href="#thisrequiremodule">this.require(module)</a></li>
      <li><a href="#thisexitcode">this.exit(code)</a></li>
    </ul>
  </li>
  <li><a href="#logs">Logs</a>
    <ul>
      <li><a href="#info---logistring">Info</a></li>
      <li><a href="#warning---logwstring">Warning</a></li>
      <li><a href="#error---logestring">Error</a></li>
      <li><a href="#debug---logdstring">Debug</a></li>
      <li><a href="#verbose---logvstring">Verbose</a></li>
    </ul>
  </li>
</ol>

<h2 id="functions">Functions</h2>
<p>The xGraph platform offers a number of features to support the development of these fractal graph 
architectures. In addition to the self-similar architecture defined by entities and modules, xGraph’s Nexus 
provides programmers with a few special functions. These functions provide programmers with the ability to 
communicate between entities and modules (or build relations), generate xGraph structures dynamically, and 
save the current state of a system. All these functions exist in the <code class="highlighter-rouge">this</code> context of every entity.</p>

<h3 id="thisgenmodulemoduleobject-callback">this.genModule(moduleObject, callback);</h3>
<h3 id="-and-">-and-</h3>
<h3 id="thisgenmodulesmoduleobject-callback">this.genModules(moduleObject, callback);</h3>
<p>The <code class="highlighter-rouge">genModule</code> function takes a module object and a callback function, starts the modules found in the 
module object, and then calls the callback function.</p>

<p>The module object can be:
Either a single module definition object</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{
	Module: "xGraph.Proxy",
	Source: "Core",
	Par: {
		Role: "Client",
		Host: "127.0.0.1",
		Port: 25005,
		Poll: true
	}
}
</code></pre></div></div>
<p>Or an object of module definitions with descriptive keys</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{
        "Plexus": {
            "Module": "xGraph.Plexus",
            "Source": "xGraph",
            "Par": {}
        },
        "Proxy": {
            "Module": "xGraph.Proxy",
            "Source": "xGraph",
            "Par": {
                "Link": "$Plexus",
                "Role": "Server"
            }
        }
    }
</code></pre></div></div>

<h3 id="thisaddmodulemodulename-modulezip-callback">this.addModule(moduleName, moduleZip, callback);</h3>
<p>The <code class="highlighter-rouge">addModule</code> function allows you to add a module to the system by adding the module’s zip to the system’s 
cache. To use this function, the <code class="highlighter-rouge">--allow-add-module</code> flag must be set when running the system from the CLI. 
<code class="highlighter-rouge">addModule</code> takes the Zipped module file and inserts it into the system’s cache under the name of the module.</p>

<h3 id="thisgenentityentitydefinition-callback">this.genEntity(entityDefinition, callback);</h3>
<p>The <code class="highlighter-rouge">genEntity</code> command takes an entity definition object and generates the entity in the module. An entity 
can only be generated in the module that is making the call. When the function is complete, the callback is 
returned with the pid of the generated entity in object.Pid.</p>

<p>The entity definition must have an <code class="highlighter-rouge">"Entity"</code> key valued with the name of the entity being generated. The 
entity must exists in the same module as the entity that is calling genEntity. For more information on 
defining entities, see our Entity Guide.</p>

<p>Here is an example of an entity being generated. The <code class="highlighter-rouge">Suite.js</code> entity is generated with a Setup and Start 
command and no parameters.</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>let entity = {
	"Entity": "Suite.js",
	"$Setup": "SetupCommand",
	"$Start": "StartCommand"
};


let callback = ((err, apx) =&gt; {
	this.Vlt.gennedEntity = com.Pid = apx;
	fun(null, com);
});

this.genEntity(entity, callback);
</code></pre></div></div>

<h3 id="thisdeleteentityapex-pid-callback">this.deleteEntity(apex, pid, callback);</h3>
<p>The <code class="highlighter-rouge">deleteEntity</code> function takes a module apex, an entity pid and a callback function and deletes the entity 
from the module’s memory. If the entity pid is the module’s apex, then all the module’s entities are deleted.</p>

<h3 id="thisgenpid">this.genPid();</h3>
<p>The genPid function does not accept any parameters and returns a 32 character hexadecimal pid.</p>

<h3 id="thissendcommand-pid-callback">this.send(command, pid, callback);</h3>
<p>The special function that you will use most is the <code class="highlighter-rouge">send</code> function. <code class="highlighter-rouge">send</code> requires three parameters: a 
command object, a destination pid, and a callback function. Send then sends the command object and the 
callback function to the xGraph part (entity or module, depending on the fractal layer) specified in the Pid.</p>

<p>The command object must have a <code class="highlighter-rouge">Cmd</code> key valued as the command that is being sent. The simplest commands look 
like this:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{
    "Cmd": "Ping"
}
</code></pre></div></div>

<p>Additionally, the command object is used to pass information from one node to another. Any number of 
key-value pairs can be added to the command object to handle information exchange. Here is a command with 
multiple parameters:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{ 
    Cmd: "Subscribe", 
    Pid: this.Par.Pid, 
    Link: "2DView" 
}
</code></pre></div></div>

<p>Pids are generated by Genesis when and xGraph system is compiled, and saved in references, typically in the 
<code class="highlighter-rouge">this.Par</code> object. These references are defined in a system’s structure object, typically a config.json file, 
or a module’s structure object, a schema.json file.</p>

<p>Here is an example of a command being sent to a <code class="highlighter-rouge">Pid</code> referenced in the entities parameter object, 
<code class="highlighter-rouge">this.Par</code>, and then calling a callback function.</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    var commandObject = {
        Cmd: "OtherFunction",
        someValue: 1
    };

    that.send(commandObject, that.Par.Friend, callback);

    function callback(err,com){
        log.i("----Recieved callback from Other, someValue is now: ", com.someValue);
        commandObject.someValue = com.someValue;
        log.i("--xGraph Repeats: [" + message.toString().trim() + "]");
        log.i("HelloWorld is Listening... Type Something!");
    }
</code></pre></div></div>

<h3 id="thissavecallback">this.save(callback);</h3>
<p>The <code class="highlighter-rouge">save</code> function takes only a callback function. The function saves the state of this entity, the entity 
that called the function, including its current <code class="highlighter-rouge">Par</code> and <code class="highlighter-rouge">Vlt</code>, to the cache. If this entity is not an Apex, 
the save message is sent to the Apex of this entity’s module. If it is an Apex, save the entity’s 
information, as well as all other relevant information. When this is complete, the callback function is 
called.</p>

<p>You can use <code class="highlighter-rouge">this.send()</code> anytime to save an entity by simply using <code class="highlighter-rouge">this.send(callback);</code> Here is an 
example of an entity that saves itself on the <code class="highlighter-rouge">Start</code> command:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	function Start(com, fun) {
		console.log('--Model/Start');
		this.save();
		if(fun)
			fun();
	}
</code></pre></div></div>

<h3 id="thisgetfilemodule-filename-callback">this.getFile(module, filename, callback);</h3>
<p>Get a file from the module.json module definition.</p>

<h3 id="thisrequiremodule">this.require(‘module’);</h3>
<p>The <code class="highlighter-rouge">require</code> function handles external dependencies in xGraph. Given a module name, <code class="highlighter-rouge">require</code> loads the 
given module, returning the module object. Often, you will want to save the module object in the entity’s 
Vault, <code class="highlighter-rouge">this.Vlt</code>.</p>

<p>Here, we load the <code class="highlighter-rouge">sqlite3</code> dependency, check to see that it loaded properly, and then save sqlite3 module to 
<code class="highlighter-rouge">this.Vlt</code> with the key <code class="highlighter-rouge">Sqlite3</code>.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>let sqlite3 = this.require('sqlite3');

if (sqlite3 == null || sqlite3 == undefined) {
     errors = "Unable to load sqlite3.";
}


Vlt.Sqlite3 = sqlite3;
</code></pre></div></div>

<h3 id="thisexitcode">this.exit(code);</h3>
<p>The <code class="highlighter-rouge">exit</code> function instructs nexus to exit with the code provided. Nexus will then stop all running xGraph 
processes related to the system.</p>

<h2 id="logs">Logs</h2>
<p>xGraph offers a suit of logging functions that enable logs to be printed or saved without losing information 
on the structure of your xGraph system. There are a variety of functions available to print logs, each with 
its own special functionality. Next we will look at the different log functions and how they might be used.</p>

<h3 id="info---logistring">Info - log.i(string);</h3>
<p><code class="highlighter-rouge">log.i</code> takes a string and prints it. It is meant for printing general statements and logs. These will be 
printed and will be printed in turquoise.</p>

<h3 id="warning---logwstring">Warning - log.w(string);</h3>
<p><code class="highlighter-rouge">log.w</code> takes a string and prints it. It is meant for printing warning statements and logs. These will 
typically be printed in white.</p>

<h3 id="error---logestring">Error - log.e(string);</h3>
<p><code class="highlighter-rouge">log.e</code> takes a string and prints it. It is meant for printing error statements and logs. These will 
typically be printed in red.</p>

<h3 id="debug---logdstring">Debug - log.d(string);</h3>
<p><code class="highlighter-rouge">log.d</code> takes a string and prints it. It is meant for printing debug statements and logs. These will 
typically be printed in fuchsia.</p>

<h3 id="verbose---logvstring">Verbose - log.v(string);</h3>
<p><code class="highlighter-rouge">log.v</code> takes a string and prints it. It is meant for printing verbose statements, or statements that give 
specific or detailed information. These will typically be printed in gray.</p>

            </div>
          </div>
        </main><footer class="site-footer h-card bg-dark text-light-green">
  <div class="container">


    <h2 class="footer-heading"><a class="u-url text-green" href="/">xGraph</a></h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Introspective Systems</li><li><a class="u-email" href="mailto:info@introspectivesystems.com">info@introspectivesystems.com</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/IntrospectiveSystems"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">IntrospectiveSystems</span></a></li><li><a href="https://www.twitter.com/AtIntrospective"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#twitter"></use></svg> <span class="username">AtIntrospective</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>xGraph makes development of complex systems easy with its graph architecture of self-similar parts.</p>
      </div>
    </div>
  </div>

</footer>
</div>
    </div>
    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js" integrity="sha384-smHYKdLADwkXOn1EmN1qk/HfnUcbVRZyYmZ4qpPea6sjB/pTJ0euyQp0Mk8ck+5T" crossorigin="anonymous"></script>
  </body>

</html>
